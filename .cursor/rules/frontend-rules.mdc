---
description: Правила для работы с фронтенд-компонентами
globs: src/components/**/*.tsx, src/app/**/*.tsx
---

# Правила для фронтенд-компонентов

## Компоненты

- Использовать `shadcn/ui` компоненты как базу (Button, Input, Table, Card, Tabs, Dialog, Select)
- Каждый компонент — отдельный файл в соответствующей папке
- Не дублировать логику — выносить в хуки (`src/hooks/`) или утилиты (`src/lib/`)
- Props-типы определять рядом с компонентом или в `src/types/`

## Таблицы процессов и рисков

- Динамическое добавление/удаление строк
- Перетаскивание строк (drag & drop) для изменения порядка: иконка `GripVertical` (lucide-react) в первой колонке, HTML5 Drag & Drop API, `useRef` для индекса источника, `useState` для подсветки цели
- Кнопка «Скопировать из AS-IS» на TO-BE таблицах — появляется когда в AS-IS есть строки, копирует все строки с новыми ID
- Редактирование inline (без модальных окон)
- Автовычисляемые поля обновляются мгновенно
- Итоговая строка выделена визуально
- Кнопка «+ Добавить строку» внизу таблицы

## Формы

- Controlled components (React state)
- Числовые поля с дробными значениями (время, цена, доля): компонент `DecimalInput` (`src/components/ui/decimal-input.tsx`) — позволяет вводить 0.1, 0,5 и т.п., поддерживает точку и запятую
- Прочие числовые поля: `type="number"`, min/step где уместно
- Валидация: подсветка ошибок inline, без alert()
- Debounced автосохранение

## UI/UX

- Все интерактивные элементы имеют hover/focus состояния
- Loading skeleton при загрузке данных
- Пустые состояния с понятными подсказками
- Подсказки (tooltips) для неочевидных полей
- Stepper/tabs навигация для шагов калькулятора
