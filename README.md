# AI ROI Calculator

Веб-сервис для расчёта ROI внедрения ИИ-решений в бизнес-процессы.

Позволяет описать процесс «как есть» (AS-IS) и целевое состояние с ИИ (TO-BE), учесть ошибки, динамику раскатки, OPEX/CAPEX и получить наглядный расчёт окупаемости.

## Технологический стек

| Слой | Технология | Обоснование |
|------|-----------|-------------|
| Frontend + Backend | **Next.js 14** (App Router, TypeScript) | Единый проект, SSR, API Routes — минимум конфигурации |
| UI-компоненты | **shadcn/ui** + **Tailwind CSS** | Красивые готовые компоненты, быстрая стилизация |
| Графики | **Recharts** | React-нативная библиотека, кастомизируемая, красивая |
| ORM | **Prisma** | Типобезопасность, миграции, простота |
| База данных | **SQLite** | Лёгкая, без отдельного сервера, достаточна для проекта |
| Деплой | **Timeweb VPS** | Бюджетный VPS, доступ по IP |

## Структура проекта

```
ai_roi_calculate/
├── .cursor/
│   └── rules/              # Правила для AI-агентов Cursor
├── docs/
│   ├── PRODUCT_SPEC.md     # Продуктовая спецификация
│   ├── DEVELOPMENT_PLAN.md # Поэтапный план разработки
│   └── DATA_MODEL.md       # Модель данных
├── prisma/
│   └── schema.prisma       # Схема БД
├── src/
│   ├── app/                # Next.js App Router (страницы + API)
│   ├── components/         # React-компоненты
│   │   ├── ui/             # shadcn/ui базовые компоненты
│   │   ├── process/        # Компоненты описания процесса
│   │   ├── errors/         # Компоненты ошибок
│   │   ├── costs/          # OPEX/CAPEX компоненты
│   │   ├── charts/         # Графики и визуализации
│   │   └── layout/         # Layout компоненты
│   ├── lib/                # Утилиты, расчёты, хелперы
│   │   ├── calculations/   # Формулы ROI, экономия, раскатка
│   │   └── db.ts           # Prisma client
│   └── types/              # TypeScript типы
├── public/                 # Статика
├── README.md
├── package.json
└── tsconfig.json
```

## Быстрый старт (разработка)

```bash
# Установка зависимостей
npm install

# Инициализация БД
npx prisma db push

# Запуск dev-сервера
npm run dev
```

Приложение будет доступно на `http://localhost:3000`

## Правила разработки

### Общие принципы
1. **Язык кода** — английский (переменные, функции, комментарии)
2. **Язык интерфейса** — русский
3. **TypeScript** — strict mode, никаких `any` без крайней необходимости
4. **Компоненты** — функциональные, с хуками, без классов
5. **Стили** — только Tailwind CSS, никакого inline CSS и CSS-модулей

### Архитектурные правила
1. Бизнес-логика расчётов живёт в `src/lib/calculations/` — чистые функции, покрытые тестами
2. Компоненты не содержат бизнес-логику — только отображение и обработка пользовательского ввода
3. API-роуты в `src/app/api/` — тонкие, делегируют логику в `src/lib/`
4. Все типы данных описаны в `src/types/`
5. Prisma-клиент инициализируется один раз в `src/lib/db.ts`

### Работа с данными
1. Расчёт работает без авторизации — данные привязаны к сессии или сохраняются по уникальному ID
2. Библиотека шаблонов — отдельная таблица, доступ к админке по секретной ссылке
3. SQLite-файл лежит в `prisma/dev.db` (dev) и `prisma/prod.db` (prod)

### Именование
- Компоненты: `PascalCase` (файл и экспорт)
- Утилиты/хелперы: `camelCase`
- Типы/интерфейсы: `PascalCase`, префикс `I` не используется
- API-роуты: `kebab-case` в URL
- Файлы компонентов: `kebab-case.tsx`

### Git
- Коммиты на русском, формат: `тип: описание` (например: `feat: добавить таблицу процесса AS-IS`)
- Типы: `feat`, `fix`, `refactor`, `docs`, `style`, `chore`
- Ветка `main` — стабильный код

## Деплой на Timeweb

Подробная инструкция — в `docs/DEVELOPMENT_PLAN.md`, фаза 6.

```bash
# Базовая схема деплоя:
# 1. VPS с Ubuntu 22.04
# 2. Node.js 20 LTS через nvm
# 3. PM2 для управления процессом
# 4. Nginx как reverse proxy
# 5. Доступ по IP:80
```

## Документация

| Документ | Описание |
|----------|----------|
| [Продуктовая спецификация](docs/PRODUCT_SPEC.md) | Полное описание функционала, ролей, экранов |
| [План разработки](docs/DEVELOPMENT_PLAN.md) | Фазы, задачи, приоритеты |
| [Модель данных](docs/DATA_MODEL.md) | Схема БД, связи, типы |
